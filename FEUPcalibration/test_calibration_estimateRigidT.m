close all
clc
clear all
w = [0.7005 0.024 0; ... 
   0.4 0.024 0 ; ...
   0.2495 0.024 0; ...
   0.402 0.19 0; ...
   0.449 -0.004 0.16627; ...
   0.449 -0.004 0.11877; ...
   0.449 -0.004 0.07127; ...
   0.449 -0.004 0.02377];

ctag = [-0.322713 0.0119508 0.671776; ...
    0.0577349 0.0274597 0.670989; ...
    0.243119 0.0353418 0.669769; ...
    0.053183 0.158643 0.511146; ...
    0.0110721 -0.161089 0.57441; ...
    0.00809416 -0.114525 0.611413; ...
    0.00515552 -0.0678623 0.646763; ...
    0.00249965 -0.0216926 0.685821];

scatter3(w(:, 1), w(:, 2), w(:, 3), 'r');
hold on;
scatter3(ctag(:, 1), ctag(:, 2), ctag(:, 3), 'g');

%%
[a, b] = estimateRigidTransform(w', ctag');

c = [ctag ones(8,1)]';

w_p = a*c;
w_p = w_p(1:3,:)';

figure;
scatter3(w(:, 1), w(:, 2), w(:, 3), 'r');
hold on;
scatter3(w_p(:, 1), w_p(:, 2), w_p(:, 3), 'b');